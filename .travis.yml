language: node_js
node_js:
  - '8'
#os: osx todo restore safari
install: ./build/npm-install.sh
before_install: if [[ `npm -v` != 6* ]]; then npm i -g npm; fi
script:
  - npm run deploy
after_script:
  - node ./node_modules/coveralls/bin/coveralls.js -v < ./reports/report-lcov/lcov.info
sudo: required
deploy:
  - provider: npm
    skip_cleanup: true
    email: comindware-awesome-bot@comindware.com
    api_key:
      secure: jCu2wOFIoN61+2c2dcuJIehyGi0sA3JDMzyHAbheMqH6hD2e8kq6G6UGhM6q8ub9vxcNqayYwB7+iLuFEsR3T1+C1rO+vRx+41HCausr6ju2aQrILL/MiPL8gw5j35xn8NzyXXSrYdHe2SMEqWT90jd1mIPHmFM/GRZxJIyBT3nVuq/kaFa5qrqqFylLH0oXs2ofF2mz76R394jnu9cGF+MSRHOEHlHsxeePXmGf1o0+fTUBhO/9DGqDgryk+ec7WZCtTValTkQ4XWziD9TdvbAQRn1tTdHxWEfd5aHXgiXHPYCwnGCowVDXmgkws0gS0nzC52EX4VVR0JO2q4xIY9D0l/TSL0XzwtAK1dYyPffUyYaTG7s3Rff/8SLKndUFZgdhbxK4cTc3HvPwLa4wPdJ2u0jFlyVCVvpYOxQykiqqYNYHULld62edHIzF1GwxVaF9qM12GsMCuCzwSBVBzy9AEywynvUMVYDV1N4nzbsEUxWYjDyGl2AJQIvlU0jqFtboE+BBDf1zu+z19oK6/rDADSoptVgVOdM0iqDOiDGRNEt0mmMl74azatJ8Yg8yt1SNxbWlCJDEx9A7A+D8fNqQNJWYbhxzjJbrvauBBPR+XSq6kR0D7GP55g5gBfq0DcwFGj53gX/ROLLuTF9jeYN7OmrBtcSO3L4Uu3PSYtg=
    on:
      tags: true
      repo: comindware/core-ui
      branch: master
  - provider: script
    script: npm run deploy:pages
    skip_cleanup: true
    on:
      tags: true
      repo: comindware/core-ui
      branch: master
addons:
  firefox: "latest"