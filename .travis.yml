language: node_js
node_js:
  - '8'
#os: osx todo restore safari
install: ./build/npm-install.sh
before_install: if [[ `npm -v` != 6* ]]; then npm i -g npm; fi
script:
  - npm run deploy
after_script:
  - node ./node_modules/coveralls/bin/coveralls.js -v < ./reports/report-lcov/lcov.info
sudo: required
deploy:
  - provider: npm
    skip_cleanup: true
    email: comindware-awesome-bot@comindware.com
    api_key:
      secure: mulkjb7gKL4zAjJm/2me4mP+rge4HXsZwZgYVHabPd9AJboHkLsH8yYnOrimxOcXDjmDc9J2gVww68SBQrXLINx+nGyNrO49Zr5aGpwNT2Gz4sLjOxp8AKSHb+tXHRRh20pJRxzEkL49ZyZiURvqdz8Drf9cSzS5++3QPZNOsNGRjXxgqvQrVGdoroqxK6yJ79NCijDoJWfEj648+N7AqrIbN15ifgBn+FLXI1hS+Qf4Xps7HoZATVzsfHKhyXwaQL/25ftisrPfjBy497yPX4ABMG6beW6kmPlZZHFgg25ANOmCLFsOSjZyaMZTBc7sav8MzQIST8kTjQTtP+wCNGyVMBWBO7i12OfxNL+RlplmxDzDy8yOK0byu3fxqiDLVnXaIPAGwZFFHeG9HWeaWoBiDloh0D7WTmVmZnmrHgW3vYeP1ls1W3C73HT8sMektYi6ignuFcY2RmPAvkYumq2fIUU3bYucAdf5pAajW08IWyWLQdOPl7F/pEiRGgg5lQqFiH/zxMXaL2CAehW9THB7Bd14KoNMZL1nR6zDbuSz/Vu9lCEU1Zv491eaE4NYTu4tGFBQi2FHBRoQWtQSBnF1+J5P85EJ69tWuxrGRpEyQffZYav/+E6jDtZ2MWQc2mlJPiF6WzuS92DjeFL9xRv92wv1TTggjYmq+UXNOeI=
    on:
      tags: true
      repo: comindware/core-ui
      branch: master
  - provider: script
    script: npm run deploy:pages
    skip_cleanup: true
    on:
      tags: true
      repo: comindware/core-ui
      branch: master
addons:
  firefox: "latest"