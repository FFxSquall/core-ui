language: node_js
node_js:
  - '8'
#os: osx todo restore safari
install: ./build/npm-install.sh
before_install: if [[ `npm -v` != 6* ]]; then npm i -g npm; fi
script:
  - npm run deploy
after_script:
  - node ./node_modules/coveralls/bin/coveralls.js -v < ./reports/report-lcov/lcov.info
sudo: required
deploy:
  - provider: npm
    skip_cleanup: true
    email: comindware-awesome-bot@comindware.com
    api_key:
      secure: ZDC2HmgwOIQnFinffoPvHkl/eGMugAgGNdRhhq+halOUs/zukJgywHwxyose1aqDDINBSohtBY4H29Y3A7ImtwxuzEVnECMRaxdHzZhhspXLHXZZy+IgAYJtxSzd7kDFcJMkqXBRudumIsHPoGlt0l77Y3JMHuPc3ph0QWRR7x2Is8tx79MG0VQoRVW1xCNMyGrkeE1dTx04y1KVaUl2LQThISGaCltCVIIgnumAu+IoJ88YSCQdHBUa24xyVA4Xkx/82IwR2/s+nYxJz+XHE5VsUnW9rxllPhDzbu2KbwhhKQY+KQIp+eYjWRxOyCP0hj1iJBk8pl+za+FpDPPi/LOPV/KPZIzM047Dr0dghGmlAvDjjt+hE/yaw8VoGKF+Dvxp8ExpOW5wf2BKwv/r3fq6yE8rmbgcrSSGQv7WI5oWQ7JFtSo2B/AmcGZrFIwmI0kqnJVmVpDFDpBUh4v4diuXVUlQj7ZTazPj4HsFKPFR3yJnNqQGRhBrg2Jr4Tq+Ju16Wu4mysXTR94a6gjJtNdaZSH14mkm1HUCb0joit1x0GfZFeqiWF4a3sySytiiL5+EFVytVMfP7Zyc32xtGBrmVtUE/BopJJ8k5WNAxPz0ykrMia9/YjVUpg/h9xk21zcIk0KM2pI14UwrW+HuXIb3NQV/+ziiei/ZEjRX0UA=
    on:
      tags: true
      repo: comindware/core-ui
      branch: master
  - provider: script
    script: npm run deploy:pages
    skip_cleanup: true
    on:
      tags: true
      repo: comindware/core-ui
      branch: master
addons:
  firefox: "latest"